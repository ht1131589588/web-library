<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <div></div>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js"></script>
    <script>
      // var curry = _.curry

      // var match = curry(function(what, str) {
      //   return str.match(what)
      // })

      // var replace = curry(function(what, replacement, str) {
      //   return str.replace(wtht, replacement)
      // })

      // var filter = curry(function(f, ary) {
      //   return ary.filter(f)
      // })

      // var map = curry(function(f, ary) {
      //   return ary.map(f)
      // })

      // match(/\s+/g, 'hello world')

      /**
        Currying 又称部分求值。一个 Currying 的函数首先会接受一些参数，
        接受了这些参数之后，该函数并不会立即求值，而是继续返回另外一个函数，
        刚才传入的参数在函数形成的闭包中被保存起来。待到函数被真正需要求值的时候，
        之前传入的所有参数都会被一次性用于求值
      */

      // 实现柯里化函数
      function curry(func) {
        return (...args) => {
          return wapperFunc(args, func)
        }
      }

      function wapperFunc(args, func) {
        if (func.length === 1 || args.length >= func.length) {
          return func(...args)
        }
        if (args.length < func.length) {
          var preArg = args
          return (...rest) => {
            return wapperFunc([...preArg, ...rest], func)
          }
        }
      }

      // 实现 map
      function map(func, array) {
        var newArr = []
        for (var index = 0; index < array.length; index++) {
          newArr[i] = func(array[index])
        }
        return newArr
      }

      // 实现 filter
      function filter(func, array) {
        var newArr = []
        for (var index = 0; index < array.length; index++) {
          if (func(array[index])) {
            newArr[i] = func(array[index])
          }
        }
        return newArr
      }

      // 实现 reduce
      function reduce(func, start, array) {
        var acc = start
        for (var index = 0; index < array.length; index++) {
          acc = func(acc, array[index])
        }
        return acc
      }
    </script>
  </body>
</html>
