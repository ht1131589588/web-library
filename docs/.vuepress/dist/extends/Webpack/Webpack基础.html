<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 基础 | 时羽·前端知识库</title>
    <meta name="description" content="前端,前端工程师,前端自学,前端进阶,前端发展">
    
    
    <link rel="preload" href="/assets/css/0.styles.1ea483f6.css" as="style"><link rel="preload" href="/assets/js/app.da8adb1d.js" as="script"><link rel="preload" href="/assets/js/2.96de6bcb.js" as="script"><link rel="preload" href="/assets/js/3.350bb032.js" as="script"><link rel="prefetch" href="/assets/js/10.241d32d2.js"><link rel="prefetch" href="/assets/js/11.a6831e54.js"><link rel="prefetch" href="/assets/js/12.adcd6c84.js"><link rel="prefetch" href="/assets/js/13.ee439a5a.js"><link rel="prefetch" href="/assets/js/14.3c912610.js"><link rel="prefetch" href="/assets/js/15.1ef78249.js"><link rel="prefetch" href="/assets/js/16.abff9c02.js"><link rel="prefetch" href="/assets/js/17.3d4be703.js"><link rel="prefetch" href="/assets/js/18.1ddd33b9.js"><link rel="prefetch" href="/assets/js/19.eba6f6ef.js"><link rel="prefetch" href="/assets/js/20.1f20a295.js"><link rel="prefetch" href="/assets/js/21.2ddcddb0.js"><link rel="prefetch" href="/assets/js/22.d2320752.js"><link rel="prefetch" href="/assets/js/23.ea5638f0.js"><link rel="prefetch" href="/assets/js/24.21022535.js"><link rel="prefetch" href="/assets/js/25.c9cee89b.js"><link rel="prefetch" href="/assets/js/26.6f85fc67.js"><link rel="prefetch" href="/assets/js/27.ab88f00b.js"><link rel="prefetch" href="/assets/js/28.d4d19997.js"><link rel="prefetch" href="/assets/js/29.d6722fdf.js"><link rel="prefetch" href="/assets/js/30.dbab78d1.js"><link rel="prefetch" href="/assets/js/31.b1a95078.js"><link rel="prefetch" href="/assets/js/32.ad603326.js"><link rel="prefetch" href="/assets/js/33.df9cbf21.js"><link rel="prefetch" href="/assets/js/34.fd307270.js"><link rel="prefetch" href="/assets/js/35.95600bfc.js"><link rel="prefetch" href="/assets/js/36.b94b68ea.js"><link rel="prefetch" href="/assets/js/37.5ba3a878.js"><link rel="prefetch" href="/assets/js/38.edc16a3e.js"><link rel="prefetch" href="/assets/js/39.ab623e87.js"><link rel="prefetch" href="/assets/js/4.869a7c72.js"><link rel="prefetch" href="/assets/js/40.ad94d9f9.js"><link rel="prefetch" href="/assets/js/41.295de8ff.js"><link rel="prefetch" href="/assets/js/5.99669916.js"><link rel="prefetch" href="/assets/js/6.d6e3272a.js"><link rel="prefetch" href="/assets/js/7.51b7c828.js"><link rel="prefetch" href="/assets/js/8.75780f47.js"><link rel="prefetch" href="/assets/js/9.c6b9315b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1ea483f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">时羽·前端知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/AlgorithmAndDataStructure/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><a href="/front/" class="nav-link">前端</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">Nodejs</a></div><div class="nav-item"><a href="/extends/" class="nav-link router-link-active">扩展</a></div><div class="nav-item"><a href="https://github.com/ht1131589588/web-library" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/AlgorithmAndDataStructure/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><a href="/front/" class="nav-link">前端</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">Nodejs</a></div><div class="nav-item"><a href="/extends/" class="nav-link router-link-active">扩展</a></div><div class="nav-item"><a href="https://github.com/ht1131589588/web-library" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack 系列</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/extends/Webpack/初识Webpack.html" class="sidebar-link">初识 webpack</a></li><li><a href="/extends/Webpack/Webpack基础.html" class="active sidebar-link">webpack 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#核心概念之-entry" class="sidebar-link">核心概念之 entry</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#核心概念之-output" class="sidebar-link">核心概念之 output</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#核心概念之-loaders" class="sidebar-link">核心概念之 Loaders</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#核心概念之-plugins" class="sidebar-link">核心概念之 Plugins</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#核心概念之-mode" class="sidebar-link">核心概念之 Mode</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#资源解析：解析-es6" class="sidebar-link">资源解析：解析 ES6</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#资源解析：解析-react-jsx" class="sidebar-link">资源解析：解析 React JSX</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#资源解析：解析-css" class="sidebar-link">资源解析：解析 CSS</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#资源解析：解析-less-和-sass" class="sidebar-link">资源解析：解析 Less 和 Sass</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#资源解析：解析图片和字体" class="sidebar-link">资源解析：解析图片和字体</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#webpack-中的⽂文件监听" class="sidebar-link">webpack 中的⽂文件监听</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#热更新：-webpack-dev-server" class="sidebar-link">热更新： webpack-dev-server</a></li><li class="sidebar-sub-header"><a href="/extends/Webpack/Webpack基础.html#文件指纹" class="sidebar-link">文件指纹</a></li></ul></li><li><a href="/extends/Webpack/Webpack进阶.html" class="sidebar-link">webpack 进阶</a></li><li><a href="/extends/Webpack/Webpack实战.html" class="sidebar-link">webpack 实战</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-基础"><a href="#webpack-基础" aria-hidden="true" class="header-anchor">#</a> webpack 基础</h1> <h2 id="核心概念之-entry"><a href="#核心概念之-entry" aria-hidden="true" class="header-anchor">#</a> 核心概念之 entry</h2> <p><code>entry</code> 是用来指定 webpack 的打包入口</p> <h3 id="理解-webpack-依赖图"><a href="#理解-webpack-依赖图" aria-hidden="true" class="header-anchor">#</a> 理解 webpack 依赖图</h3> <p><img src="/assets/img/webpack.f9611475.jpg" alt="webpack依赖图"></p> <p>依赖图的入口是 <code>entry</code>，对于非代码比如图片，字体依赖也会不断加入到依赖图中</p> <h3 id="entry-的用法"><a href="#entry-的用法" aria-hidden="true" class="header-anchor">#</a> Entry 的用法</h3> <ol><li>单入口：<code>entry</code>是一个字符串</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>多入口</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="核心概念之-output"><a href="#核心概念之-output" aria-hidden="true" class="header-anchor">#</a> 核心概念之 output</h2> <p><code>output</code> 用来告诉 <code>webpack</code> 如何将编译后的文件输出到磁盘</p> <p>输出文件默认值是<code>./dist/main.js</code></p> <h3 id="output-的用法"><a href="#output-的用法" aria-hidden="true" class="header-anchor">#</a> output 的用法</h3> <ol><li>单入口配置</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'dist'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 或者</span>
  <span class="token comment">// output: __dirname + 'dist/bundle.js'</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>多入口配置</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="核心概念之-loaders"><a href="#核心概念之-loaders" aria-hidden="true" class="header-anchor">#</a> 核心概念之 Loaders</h2> <p><code>webpack</code> 开箱即用只支持 <code>JS</code> 和 <code>JSON</code> 两种文件类型，通过 Loaders 去支持其它文件类型并且把它们转换成有效的模块，并添加到依赖图中。</p> <p><code>loader</code> 本身是一个函数，接受源文件作为参数，返回转换后的结果。</p> <h3 id="常见的-loaders"><a href="#常见的-loaders" aria-hidden="true" class="header-anchor">#</a> 常见的 loaders</h3> <table><thead><tr><th>loader 名称</th> <th>描述</th></tr></thead> <tbody><tr><td><code>babel-loader</code></td> <td>转换 ES6、ES7 等新特性语法</td></tr> <tr><td><code>css-loader</code></td> <td>支持.css 文件的加载和解析</td></tr> <tr><td><code>less-loader</code></td> <td>将 less 转换成 css</td></tr> <tr><td><code>ts-loader</code></td> <td>将 ts 转换成 js</td></tr> <tr><td><code>file-loader</code></td> <td>进行图片、字体的打包</td></tr> <tr><td><code>raw-loader</code></td> <td>将文件以字符串的形式导入</td></tr> <tr><td><code>thread-loader</code></td> <td>多进程打包 js 和 css</td></tr></tbody></table> <p>中文官网 <code>loaders</code> 列表： <a href="https://www.webpackjs.com/loaders/" target="_blank" rel="noopener noreferrer">https://www.webpackjs.com/loaders/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="loaders-的用法"><a href="#loaders-的用法" aria-hidden="true" class="header-anchor">#</a> loaders 的用法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 单loader</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.txt/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'raw-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 多loader</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.less/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 配置loader</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.jpe?g/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// 对loader设置一些配置，参数由loader定义</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash:8].[ext]'</span><span class="token punctuation">,</span>
            limit<span class="token punctuation">:</span> <span class="token number">10240</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>test</code>: 指定匹配规则</li> <li><code>use</code>: 指定使用的 <code>loader</code> 名称和对应的参数配置，多个 <code>loader</code> 时，需要注意执行顺序是从右至左</li></ul> <h2 id="核心概念之-plugins"><a href="#核心概念之-plugins" aria-hidden="true" class="header-anchor">#</a> 核心概念之 Plugins</h2> <p>插件用于 bundle 文件的优化、资源管理和环境变量注入</p> <p>作用于整个构建过程</p> <h3 id="常见的-plugins"><a href="#常见的-plugins" aria-hidden="true" class="header-anchor">#</a> 常见的 Plugins</h3> <table><thead><tr><th>plugin 名称</th> <th>描述</th></tr></thead> <tbody><tr><td><code>CommonsChunkPlugin</code></td> <td>将 chunks 相同的模块提取公共 js</td></tr> <tr><td><code>CleanWebpackPlugin</code></td> <td>清理构建目录</td></tr> <tr><td><code>ExtractTextWebpackPlugin</code></td> <td>将 css 从 bundle 文件里提取成一个独立的 css 文件</td></tr> <tr><td><code>CopyWebpackPlugin</code></td> <td>将文件或者文件夹拷贝到输出目录</td></tr> <tr><td><code>HtmlWebpackPlugin</code></td> <td>创建 html 文件去承载输出的 bundle</td></tr> <tr><td><code>UglifyjsWebpackPlugin</code></td> <td>压缩 js</td></tr> <tr><td><code>ZipWebpackPlugin</code></td> <td>将打包的资源生成一个 zip 包</td></tr></tbody></table> <p>中文官网 <code>plugins</code> 列表： <a href="https://www.webpackjs.com/plugins/" target="_blank" rel="noopener noreferrer">https://www.webpackjs.com/plugins/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="plugins-的用法"><a href="#plugins-的用法" aria-hidden="true" class="header-anchor">#</a> Plugins 的用法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'./public/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="核心概念之-mode"><a href="#核心概念之-mode" aria-hidden="true" class="header-anchor">#</a> 核心概念之 Mode</h2> <p><code>Mode</code> 是用来指定当前的构建环境是 <code>production</code> 、 <code>development</code> 还是 <code>none</code></p> <p>设置 <code>mode</code> 可以使用 <code>webpack</code> 内置的函数，默认值为 <code>production</code></p> <h3 id="mode-的内置函数功能"><a href="#mode-的内置函数功能" aria-hidden="true" class="header-anchor">#</a> Mode 的内置函数功能</h3> <table><thead><tr><th>选项</th> <th>描述</th></tr></thead> <tbody><tr><td><code>development</code></td> <td>会将 <code>process.env.NODE_ENV</code> 的值设为 <code>development</code>。启用 <code>NamedChunksPlugin</code> 和 <code>NamedModulesPlugin</code>。</td></tr> <tr><td><code>production</code></td> <td>会将 <code>process.env.NODE_ENV</code> 的值设为 <code>production</code>。启用 <code>FlagDependencyUsagePlugin</code>, <code>FlagIncludedChunksPlugin</code>, <code>ModuleConcatenationPlugin</code>, <code>NoEmitOnErrorsPlugin</code>, <code>OccurrenceOrderPlugin</code>, <code>SideEffectsFlagPlugin</code> 和 <code>TerserPlugin</code>.</td></tr> <tr><td><code>none</code></td> <td>不开启任何优化选项</td></tr></tbody></table> <p>插件说明：
开发模式：</p> <ul><li><code>NamedChunksPlugin</code> : 使用 chunk 的名字来作为 chunk 的 id</li></ul> <p><img src="/assets/img/chunknamed.3e195a6f.png" alt=""></p> <ul><li><code>NamedModulesPlugin</code> : 作用是在热加载时直接返回更新文件名，而不是文件的 id</li></ul> <p>使用前：
<img src="/assets/img/unusenamemodule.005beb3f.png" alt=""></p> <p>使用后：
<img src="/assets/img/usenamemodule.034c8473.png" alt=""></p> <p>生产模式：</p> <ul><li><code>FlagDependencyUsagePlugin</code> : 编译时标记依赖，用于标记依赖是否使用到</li> <li><code>FlagIncludedChunksPlugin</code> : 标记子 <code>chunks</code> ，防子 <code>chunks</code> 多次加载</li> <li><code>ModuleConcatenationPlugin</code> : webpack 本身构建后的代码存在⼤量闭包代码，这个插件用于将所有模块的代码按照引用顺序放在一个函数作用域里，然后适当的重命名一些变量以防变量名冲突，在下一章节的 <code>scope hoisting</code> 部分会讲到</li> <li><code>NoEmitOnErrorsPlugin</code> : 在编译出现错误时，使用该插件来跳过输出阶段</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NoEmitOnErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>OccurrenceOrderPlugin</code> : 用于排序输出，通过模块调用次数给模块分配 ids，常用的 ids 就会分配更短的 id，使 ids 可预测，减小文件大小</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>OccurrenceOrderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>SideEffectsFlagPlugin</code></li></ul> <p>作用：模块依赖分析</p> <p>会识别 package.json 或者 module.rules 的 sideEffects 标志（纯的 ES2015 模块)并排除配置的选项，其他文件没有使用过并且没有副作用的模块都会被打上 <code>sideEffectFree</code> 标记。在 <code>ModuleConcatenationPlugin</code> 中，带着 sideEffectFree 标记的模块将不会被打包</p> <ul><li><code>TerserPlugin</code> : 生成环境默认启用，该插件会进行 <code>Tree Shaking(摇树优化)</code>，然后用 <code>uglify</code> 压缩代码</li></ul> <h2 id="资源解析：解析-es6"><a href="#资源解析：解析-es6" aria-hidden="true" class="header-anchor">#</a> 资源解析：解析 ES6</h2> <p>使用 <code>babel-loader</code>，<code>babel</code> 的配置文件是<code>.babelrc</code>(用于替换 loader 的 options 配置)</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="资源解析：解析-react-jsx"><a href="#资源解析：解析-react-jsx" aria-hidden="true" class="header-anchor">#</a> 资源解析：解析 React JSX</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;@babel/preset-react&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="资源解析：解析-css"><a href="#资源解析：解析-css" aria-hidden="true" class="header-anchor">#</a> 资源解析：解析 CSS</h2> <ul><li><code>css-loader</code> 用于加载 <code>.css</code> 文件，并且转换成 <code>commonjs</code> 对象</li> <li><code>style-loader</code> 将样式通过 <code>&lt;style&gt;</code> 标签插入到 <code>head</code> 中</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="资源解析：解析-less-和-sass"><a href="#资源解析：解析-less-和-sass" aria-hidden="true" class="header-anchor">#</a> 资源解析：解析 Less 和 Sass</h2> <ul><li><code>less-loader</code>: 用于将 <code>less</code> 转换成 <code>css</code></li> <li><code>less</code>: <code>less-loader</code> 需要依赖<code>less</code></li> <li><code>sass-loader</code>: 用于将 <code>scss</code> 转换成 <code>css</code></li> <li><code>node-sass</code>: <code>sass-loader</code> 需要依赖<code>node-sass</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="资源解析：解析图片和字体"><a href="#资源解析：解析图片和字体" aria-hidden="true" class="header-anchor">#</a> 资源解析：解析图片和字体</h2> <ul><li><code>file-loader</code> 用于处理文件</li> <li><code>url-loader</code> 也可以处理理图⽚片和字体 可以设置较小资源自动转为 <code>base64</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// file-loader 使用</span>
<span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(png|svg|jpg|gif)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token string">'file-loader'</span>
<span class="token punctuation">}</span>

<span class="token comment">// url-loader 使用</span>
<span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(png|svg|jpg|gif)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        limit<span class="token punctuation">:</span> <span class="token number">10240</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="webpack-中的⽂文件监听"><a href="#webpack-中的⽂文件监听" aria-hidden="true" class="header-anchor">#</a> webpack 中的⽂文件监听</h2> <p>文件监听是在发现源码发生变化时，自动重新构建处新的输出文件</p> <p><code>webpack</code> 开启监听模式的两种方式：</p> <ul><li>启动 <code>webpack</code> 命令时，带上 <code>--watch</code> 参数</li> <li>在配置 <code>webpack.config.js</code> 中设置 <code>watch:true</code></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>  <span class="token string">&quot;scripts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;webpack --watch&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>  watch<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 默认false</span>
  watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 忽略node_modules的变化</span>
    ignored<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
    <span class="token comment">// 监听到文件变化后，等300ms再去执行，默认300ms</span>
    aggregateTimeout<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token comment">// 判断文件是否发生变化时通过不停的询问系统指定文件有没有变化，默认每秒询问1次</span>
    poll<span class="token punctuation">:</span> <span class="token number">1000</span> <span class="token comment">// 单位ms</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="热更新：-webpack-dev-server"><a href="#热更新：-webpack-dev-server" aria-hidden="true" class="header-anchor">#</a> 热更新： webpack-dev-server</h2> <p><code>WDS</code> 不需要手动刷新浏览器
<code>WDS</code> 不输出文件，而是放在内存中</p> <p>使用 <code>HotModuleReplacementPlugin</code> 插件可以页面无刷新重新渲染，简称 <code>HMR</code></p> <p>添加<code>HMR</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="css-实现-hmr"><a href="#css-实现-hmr" aria-hidden="true" class="header-anchor">#</a> css 实现 <code>HMR</code></h3> <p>借助于 <code>style-loader</code>，使用模块热替换来加载 <code>CSS</code> 实际上极其简单。此 loader 在幕后使用了 <code>module.hot.accept</code>，在 CSS 依赖模块更新之后，会将其 patch(修补) 到 <code>&lt;style&gt;</code> 标签中</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="js-实现-hmr"><a href="#js-实现-hmr" aria-hidden="true" class="header-anchor">#</a> js 实现 <code>HMR</code></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// counter.js</span>
<span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
  div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'counter'</span><span class="token punctuation">)</span>
  div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">111111</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> counter

<span class="token comment">// index.js</span>
<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">'./counter'</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./counter'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>修改 <code>counter.js</code> 页面会进行 <code>HMR</code></p> <h3 id="其他代码和框架-实现-hmr"><a href="#其他代码和框架-实现-hmr" aria-hidden="true" class="header-anchor">#</a> 其他代码和框架 实现 <code>HMR</code></h3> <ul><li><a href="https://github.com/gaearon/react-hot-loader" target="_blank" rel="noopener noreferrer"><code>React Hot Loader</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> : 实时调整 react 组件</li> <li><a href="https://github.com/vuejs/vue-loader" target="_blank" rel="noopener noreferrer"><code>Vue Loader</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> : 此 loader 支持 vue 组件的 HMR，提供开箱即用体验。</li></ul> <h2 id="文件指纹"><a href="#文件指纹" aria-hidden="true" class="header-anchor">#</a> 文件指纹</h2> <h3 id="文件指纹是啥？"><a href="#文件指纹是啥？" aria-hidden="true" class="header-anchor">#</a> 文件指纹是啥？</h3> <p>文件指纹是指打包后输出的⽂文件名的后缀</p> <h3 id="文件指纹如何生成？"><a href="#文件指纹如何生成？" aria-hidden="true" class="header-anchor">#</a> 文件指纹如何生成？</h3> <p><code>hash</code> 和整个项目的构建相关，只要项目文件有修改，整个项目构建的 hash 值就会更改 所有的文件哈希值一样。
<code>chunkhash</code> 和 webpack 打包的 chunk 有关，不不同的 entry 会⽣生成不不同的 chunkhash 值。
<code>contenthash</code> 根据⽂文件内容来定义 hash ，⽂文件内容不变，则 contenthash 不变。 比如 1. css 文件中，当引入的 css 文件的主文件变化，css 未变化打包后的 hash 后缀就不会改变，2. 如果 css 不使用 contenthash，那么打包后 css 的哈希后缀 会和 js 哈希后缀一样，也会变，3. 如果这时候 js 仍然使用 chunkhash，每次 css 更改，js 的哈希后缀 也会变化</p> <h3 id="当你的网站需要考虑长效缓存，可以使用不同的-hash"><a href="#当你的网站需要考虑长效缓存，可以使用不同的-hash" aria-hidden="true" class="header-anchor">#</a> 当你的网站需要考虑长效缓存，可以使用不同的 hash</h3> <ol><li>当没有将 css 从 chunk 中抽离时直接使用 chunkhash</li> <li>当使用 mini-css-extract-plugin 插件抽离 css 时,可将 chunk 和 css 块都使用 contenthash 替换达到互不影响的作用</li> <li>不要使用 hash，这可能因为 webpack 的修改导致 hash 值变动而使缓存失效</li></ol> <p>关于 hash 的使用场景，可考虑将其作为版本控制；</p> <p>参考
<a href="https://juejin.im/post/5cd5586a5188254459335921" target="_blank" rel="noopener noreferrer">Webpack 疑问系列之 hash/chunkhash/contenthash 区别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="js-的文件指纹设置"><a href="#js-的文件指纹设置" aria-hidden="true" class="header-anchor">#</a> JS 的文件指纹设置</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name]_[chunkhash:8].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="css-的文件指纹设置"><a href="#css-的文件指纹设置" aria-hidden="true" class="header-anchor">#</a> CSS 的文件指纹设置</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里设置contenthash是为了避免css文件变化后，</span>
    <span class="token comment">// 引用该css的js文件hash后缀跟着变</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name]_[contenthash:8].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'[name]_[contenthash:8].css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="图片的文件指纹"><a href="#图片的文件指纹" aria-hidden="true" class="header-anchor">#</a> 图片的文件指纹</h3> <p>设置 file-loader 或者 url-loader 的 filename，使用 [hash]
这里的 hash 值根据图片的内容生成，图片没变化 hash 值是不会变化的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(png|svg|jpe?g|gif)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash:8].[ext]'</span><span class="token punctuation">,</span>
        limit<span class="token punctuation">:</span> <span class="token number">10240</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="注意点"><a href="#注意点" aria-hidden="true" class="header-anchor">#</a> 注意点</h3> <p>如果使用了 HotModuleReplacementPlugin 插件，输出的 chunk 文件指纹只能是 hash</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/12/2019, 11:32:53 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/extends/Webpack/初识Webpack.html" class="prev">
          初识 webpack
        </a></span> <span class="next"><a href="/extends/Webpack/Webpack进阶.html">
          webpack 进阶
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.da8adb1d.js" defer></script><script src="/assets/js/2.96de6bcb.js" defer></script><script src="/assets/js/3.350bb032.js" defer></script>
  </body>
</html>
